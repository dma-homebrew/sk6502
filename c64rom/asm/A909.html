<!DOCTYPE html>
<html>
<head>
<title>C64 ROM: Routine at A909</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">C64 ROM</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="A906.html">A906</a>
</td>
<td class="up">Up: <a href="../maps/all.html#A909">Map</a></td>
<td class="next">
Next: <a href="A928.html">A928</a>
</td>
</tr>
</table>
<div class="description">A909: scan for next BASIC line</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="A8A0.html">A8A0</a> and <a href="A93B.html">A93B</a>.
</div>
<div class="paragraph">
returns <span class="register">Y</span> as index to [EOL]
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="A909"></span>A909</td>
<td class="bytes">A2 00</td>
<td class="instruction">LDX #$00</td>
<td class="comment-1" rowspan="1">set alternate search character = [EOL]</td>
</tr>
<tr>
<td class="address-1"><span id="A90B"></span>A90B</td>
<td class="bytes">86 07</td>
<td class="instruction">STX $07</td>
<td class="comment-1" rowspan="1">store alternate search character</td>
</tr>
<tr>
<td class="address-1"><span id="A90D"></span>A90D</td>
<td class="bytes">A0 00</td>
<td class="instruction">LDY #$00</td>
<td class="comment-1" rowspan="1">set search character = [EOL]</td>
</tr>
<tr>
<td class="address-1"><span id="A90F"></span>A90F</td>
<td class="bytes">84 08</td>
<td class="instruction">STY $08</td>
<td class="comment-1" rowspan="1">save the search character</td>
</tr>
<tr>
<td class="address-2"><span id="A911"></span>A911</td>
<td class="bytes">A5 08</td>
<td class="instruction">LDA $08</td>
<td class="comment-1" rowspan="1">get search character</td>
</tr>
<tr>
<td class="address-1"><span id="A913"></span>A913</td>
<td class="bytes">A6 07</td>
<td class="instruction">LDX $07</td>
<td class="comment-1" rowspan="1">get alternate search character</td>
</tr>
<tr>
<td class="address-1"><span id="A915"></span>A915</td>
<td class="bytes">85 07</td>
<td class="instruction">STA $07</td>
<td class="comment-1" rowspan="1">make search character = alternate search character</td>
</tr>
<tr>
<td class="address-1"><span id="A917"></span>A917</td>
<td class="bytes">86 08</td>
<td class="instruction">STX $08</td>
<td class="comment-1" rowspan="1">make alternate search character = search character</td>
</tr>
<tr>
<td class="address-2"><span id="A919"></span>A919</td>
<td class="bytes">B1 7A</td>
<td class="instruction">LDA ($7A),Y</td>
<td class="comment-1" rowspan="1">get BASIC byte</td>
</tr>
<tr>
<td class="address-1"><span id="A91B"></span>A91B</td>
<td class="bytes">F0 E8</td>
<td class="instruction">BEQ <a href="A8FB.html#A905">$A905</a></td>
<td class="comment-1" rowspan="1">exit if null [EOL]</td>
</tr>
<tr>
<td class="address-1"><span id="A91D"></span>A91D</td>
<td class="bytes">C5 08</td>
<td class="instruction">CMP $08</td>
<td class="comment-1" rowspan="1">compare with search character</td>
</tr>
<tr>
<td class="address-1"><span id="A91F"></span>A91F</td>
<td class="bytes">F0 E4</td>
<td class="instruction">BEQ <a href="A8FB.html#A905">$A905</a></td>
<td class="comment-1" rowspan="1">exit if found</td>
</tr>
<tr>
<td class="address-1"><span id="A921"></span>A921</td>
<td class="bytes">C8</td>
<td class="instruction">INY</td>
<td class="comment-1" rowspan="1">else increment index</td>
</tr>
<tr>
<td class="address-1"><span id="A922"></span>A922</td>
<td class="bytes">C9 22</td>
<td class="instruction">CMP #$22</td>
<td class="comment-1" rowspan="1">compare current character with open quote</td>
</tr>
<tr>
<td class="address-1"><span id="A924"></span>A924</td>
<td class="bytes">D0 F3</td>
<td class="instruction">BNE <a href="A909.html#A919">$A919</a></td>
<td class="comment-1" rowspan="1">if found go swap search character for alternate search character</td>
</tr>
<tr>
<td class="address-1"><span id="A926"></span>A926</td>
<td class="bytes">F0 E9</td>
<td class="instruction">BEQ <a href="A909.html#A911">$A911</a></td>
<td class="comment-1" rowspan="1">loop for next character, branch always</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="A906.html">A906</a>
</td>
<td class="up">Up: <a href="../maps/all.html#A909">Map</a></td>
<td class="next">
Next: <a href="A928.html">A928</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&#169; 2012 Lee Davison.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.0 and <a href="https://github.com/skoolkid/sk6502">sk6502</a>.</div>
</footer>
</body>
</html>